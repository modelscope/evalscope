# ä»å¯¹è¯åˆ°Agentï¼šå¤§æ¨¡å‹å·¥å…·è°ƒç”¨èƒ½åŠ›çš„é‡åŒ–è¯„æµ‹

åœ¨å¤§æ¨¡å‹ä»å•çº¯çš„â€œå¯¹è¯è€…â€å‘â€œè‡ªä¸»ä»£ç†ï¼ˆAgentï¼‰â€è¿›åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œ**å·¥å…·è°ƒç”¨ï¼ˆFunctionÂ CallingÂ /Â ToolÂ Useï¼‰**Â èƒ½åŠ›æ˜¯æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚

ç„¶è€Œï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¼€å‘è€…ä»¬ç»å¸¸é¢ä¸´è¿™æ ·çš„ç—›ç‚¹ï¼šæ¨¡å‹å®£ç§°â€œæ”¯æŒå·¥å…·è°ƒç”¨â€ï¼Œä½†åœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­è¡¨ç°å´ä¸å°½å¦‚äººæ„â€”â€”è¦ä¹ˆåœ¨ç”¨æˆ·é—²èŠæ—¶çªç„¶ä¹±è°ƒÂ APIï¼Œè¦ä¹ˆç”Ÿæˆçš„Â JSONÂ å‚æ•°ç¼ºèƒ³è†Šå°‘è…¿ï¼Œå¯¼è‡´åç«¯æœåŠ¡é¢‘é¢‘æŠ¥é”™ã€‚

é‚£ä¹ˆå¦‚ä½•ç»™ä½ çš„æ¨¡å‹æ¥å£è°ƒç”¨é¢å‘ä¸€å¼ åˆæ ¼çš„â€œå·¥å…·é©¾é©¶è¯â€ï¼Ÿæµ‹è¯•æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿè¯„æµ‹æµç¨‹è¯¥å¦‚ä½•è®¾è®¡ï¼Ÿ

æ­¤ç±»è¯„ä¼°ä¸ä»…å–å†³äºæ¨¡å‹çš„å†…åœ¨èƒ½åŠ›ï¼Œè¿˜å—åˆ°æœåŠ¡å•†æ¨ç†å®ç°ã€åå¤„ç†é€»è¾‘ä»¥åŠæç¤ºå·¥ç¨‹ï¼ˆPromptÂ Engineeringï¼‰ç­‰å·®å¼‚çš„æ˜¾è‘—å½±å“ï¼Œè¿™äº›å› ç´ å‡ä¼šå¯¼è‡´å®é™…é›†æˆæ•ˆæœçš„ä¸åŒã€‚å³ä¾¿æ˜¯æœ¬åœ°éƒ¨ç½²ï¼Œæ¨ç†å¼•æ“çš„é€‰æ‹©æˆ–æ¨¡å‹é‡åŒ–ç²¾åº¦çš„å·®å¼‚ï¼Œä¹Ÿä¼šç›´æ¥å¹²æ‰°å·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œè¿›è€Œå½±å“æœ€ç»ˆçš„è½åœ°æ•ˆæœã€‚ä¾‹å¦‚ï¼Œ**æœˆä¹‹æš—é¢**ï¼ˆMoonshotÂ AIï¼‰ä¸“é—¨é’ˆå¯¹å…¶Â K2Â æ¨¡å‹æ¨å‡ºäº†éªŒè¯æ ‡å‡†ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…è¯„ä¼°å¹¶å¯¹æ¯”ä¸åŒÂ APIÂ ä¾›åº”å•†åœ¨å·¥å…·è°ƒç”¨ï¼ˆTool-callï¼‰åœºæ™¯ä¸‹çš„å®é™…è¡¨ç°ã€‚

æˆ‘ä»¬ç›¸ä¿¡è¿™æ ·å®¢è§‚çš„è¯„æµ‹ï¼Œç»ä¸åªå±€é™äºå…·ä½“çš„æŸä¸ªæ¨¡å‹ï¼Œè€Œæ˜¯æ¯ä¸ªéœ€è¦åŸºäºå¤§æ¨¡å‹æ¨¡å‹æ¥æ­å»ºå®é™…åº”ç”¨çš„å¼€å‘è€…ï¼Œéƒ½éœ€è¦çš„èƒ½åŠ›ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Â **EvalScope**Â è¯„æµ‹æ¡†æ¶ï¼Œé€šè¿‡ä¸€å¥—é€šç”¨çš„ã€å¼€ç®±å³ç”¨çš„æœ€ä½³å®è·µï¼Œæ¥å¯¹æ¨¡å‹â€œä¼šä¸ä¼šç”¨å·¥å…·ã€èƒ½ä¸èƒ½ç”¨å¥½å·¥å…·â€è¿›è¡Œé‡åŒ–è¯„ä¼°ã€‚

## ä¸€ã€Â ä¸ºä»€ä¹ˆå·¥å…·è°ƒç”¨è¯„æµ‹å¦‚æ­¤é‡è¦ï¼Ÿ

åœ¨ä¼ ç»Ÿçš„è¯„æµ‹ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€å…³æ³¨æ¨¡å‹åœ¨çŸ¥è¯†é—®ç­”ã€é€»è¾‘æ¨ç†æˆ–æ–‡æœ¬ç”Ÿæˆè´¨é‡ä¸Šçš„è¡¨ç°ã€‚ä½†åœ¨Â AgentÂ æ—¶ä»£ï¼Œè¯„ä»·æ ‡å‡†å‘ç”Ÿäº†è´¨å˜ï¼šä»å…³æ³¨â€œè¨€ä¹‹æœ‰ç†â€è½¬å‘äº†å…³æ³¨â€œæ‰§è¡Œæ— è¯¯â€ã€‚æ¨¡å‹ä¸ä»…è¦ç†è§£äººç±»è¯­è¨€ï¼Œæ›´è¦èƒ½ç²¾å‡†åœ°è®²â€œæœºå™¨è¯­è¨€â€ã€‚

æ ¹æ®Â MoonshotAIÂ å¼€æºçš„Â [K2-Vendor-Verifier](https://github.com/MoonshotAI/K2-Vendor-Verifier)Â é¡¹ç›®æ­ç¤ºçš„è¡Œä¸šç°çŠ¶ï¼Œè®¸å¤šæ¨¡å‹åœ¨å¤„ç†å·¥å…·è°ƒç”¨æ—¶å­˜åœ¨ä¸¤ä¸ªè‡´å‘½ç¼ºé™·ï¼š

1.  **å†³ç­–è¾¹ç•Œæ¨¡ç³Šï¼ˆCallÂ vs.Â NotÂ Callï¼‰**ï¼šæ¨¡å‹åˆ†ä¸æ¸…â€œç”¨æˆ·åœ¨é—²èŠâ€è¿˜æ˜¯â€œç”¨æˆ·åœ¨ä¸‹æŒ‡ä»¤â€ã€‚ä¾‹å¦‚ç”¨æˆ·è¯´â€œä»Šå¤©å¤©æ°”ä¸é”™â€ï¼Œæ¨¡å‹ä¸åº”å°è¯•è°ƒç”¨å¤©æ°”Â APIï¼Œä½†å¾ˆå¤šæ¨¡å‹ä¼šé”™è¯¯è§¦å‘ã€‚
    
2.  **å‚æ•°å¹»è§‰ï¼ˆSchemaÂ Violationï¼‰**ï¼šæ¨¡å‹ç”Ÿæˆçš„å‚æ•°å¾€å¾€ç¼ºå¤±å¿…å¡«é¡¹ï¼Œæˆ–è€…ç±»å‹é”™è¯¯ï¼ˆä¾‹å¦‚å°†å­—ç¬¦ä¸²ä¼ ç»™æ•°å­—å­—æ®µï¼‰ï¼Œå¯¼è‡´Â APIÂ è°ƒç”¨ç›´æ¥å¤±è´¥ã€‚
    

å¦‚æœæ— æ³•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæ„å»ºçš„Â AgentÂ å°±æ°¸è¿œæ— æ³•ä¸Šçº¿ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª**ç¡®å®šæ€§çš„ã€å¯å›å½’çš„**è¯„æµ‹æµç¨‹ï¼Œä¸ä»…è¦æµ‹â€œèƒ½ä¸èƒ½è°ƒé€šâ€ï¼Œè¿˜è¦æµ‹â€œè¯¥ä¸è¯¥è°ƒâ€ä»¥åŠâ€œå‚æ•°å¯¹ä¸å¯¹â€ã€‚

## äºŒã€Â æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆ

ä¸ºäº†è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼Œ**EvalScope**Â æ¡†æ¶é›†æˆäº†æ ‡å‡†åŒ–çš„Â **GeneralFunctionCall**Â è¯„æµ‹æµã€‚æˆ‘ä»¬å‚è€ƒäº†Â MoonshotAIÂ K2Â çš„éªŒè¯é€»è¾‘ï¼Œå°†å…¶å°è£…ä¸ºç®€å•æ˜“ç”¨çš„è¯„æµ‹å·¥å…·ï¼Œå¹¶åšäº†é€šç”¨æ€§æ–¹é¢çš„æ‰©å±•ã€‚

è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š

*   **åŒé‡éªŒè¯æœºåˆ¶**ï¼šæ—¢éªŒè¯**å†³ç­–å‡†ç¡®æ€§**ï¼ˆæ¨¡å‹æ˜¯å¦æ­£ç¡®åˆ¤æ–­äº†è¯¥ä¸è¯¥è°ƒå·¥å…·ï¼‰ï¼Œä¹ŸéªŒè¯**å‚æ•°åˆæ³•æ€§**ï¼ˆç”Ÿæˆçš„Â JSONÂ æ˜¯å¦å®Œç¾ç¬¦åˆÂ SchemaÂ å®šä¹‰ï¼‰ã€‚
    
*   **é«˜è´¨é‡å¯æ‰©å±•çš„åŸºå‡†æ•°æ®**ï¼šå³æ”¯æŒç›´æ¥ä½¿ç”¨æ ‡å‡†çš„é¢„å…ˆåˆæˆæ•°æ®ï¼Œä¹Ÿæ”¯æŒè¯„æµ‹æ•°æ®çš„è‡ªå®šä¹‰ã€‚
    
*   **è‡ªåŠ¨åŒ–æŒ‡æ ‡è®¡ç®—**ï¼šç›´æ¥è¾“å‡ºÂ F1Â ScoreÂ å’ŒÂ SchemaÂ é€šè¿‡ç‡ï¼Œæ— éœ€äººå·¥ä»‹å…¥ã€‚
    

## ä¸‰ã€Â å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

æœ¬èŠ‚å°†æŒ‡å¯¼ä½ å¦‚ä½•ä½¿ç”¨é¢„ç½®æ•°æ®é›†æˆ–è‡ªå®šä¹‰ä¸šåŠ¡æ•°æ®æ¥è¯„æµ‹ä½ çš„æ¨¡å‹ã€‚

åœ¨æ­¤ä¹‹å‰ï¼Œä½ éœ€è¦å®‰è£…EvalScopeåº“ï¼Œè¿è¡Œä¸‹é¢çš„ä»£ç ï¼š

```shell
pip install 'evalscope[app]' -U
```

### 1.Â å‡†å¤‡æ•°æ®

ä¸ºäº†è®©è¯„æµ‹å·¥å…·â€œæœ‰çš„æ”¾çŸ¢â€ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡æ ‡å‡†çš„Â JSONLÂ æ ¼å¼æ•°æ®ã€‚

æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæµ‹è¯•æ ·æœ¬ï¼Œæ ¸å¿ƒåŒ…å«ä¸‰ä¸ªå­—æ®µï¼š

*   `messages`:Â å¯¹è¯ä¸Šä¸‹æ–‡ã€‚
    
*   `tools`:Â æ¨¡å‹å¯ç”¨çš„å·¥å…·å®šä¹‰ï¼ˆå·¥å…·ç®±ï¼‰ã€‚
    
*   `should_call_tool`:Â **è¿™æ˜¯å…³é”®æ ‡ç­¾**ã€‚å®ƒå‘Šè¯‰è¯„æµ‹å™¨ï¼Œåœ¨è¿™ä¸ªè¯­å¢ƒä¸‹ï¼Œæ ‡å‡†ç­”æ¡ˆæ˜¯â€œè°ƒç”¨å·¥å…·Â (True)â€è¿˜æ˜¯â€œç›´æ¥å›å¤Â (False)â€ã€‚
    

**æ ‡å‡†æ•°æ®æ ·æœ¬ç¤ºä¾‹ï¼š**

```json
{
  "messages": [
    { "role": "system", "content": "ä½ æ˜¯åŠ©æ‰‹" },
    { "role": "user", "content": "æŠŠ 37 æ‘„æ°åº¦è½¬æ¢ä¸ºåæ°åº¦" }
  ],
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "convert_temperature",
        "description": "æ¸©åº¦è½¬æ¢",
        "parameters": {
          "type": "object",
          "properties": {
             "celsius": { "type": "number", "description": "æ‘„æ°æ¸©åº¦" }
          },
          "required": ["celsius"],
          "additionalProperties": false
        }
      }
    }
  ],
  "should_call_tool": true
}

```
> **ğŸ’¡Â æç¤º**ï¼š

*   ä¸ºäº†æµ‹è¯•æ¨¡å‹çš„â€œæŠ—å¹²æ‰°èƒ½åŠ›â€ï¼Œè¯·åŠ¡å¿…åŒ…å«Â `should_call_tool:Â false`Â çš„è´Ÿæ ·æœ¬ï¼ˆä¾‹å¦‚ç”¨æˆ·åªæ˜¯åœ¨æ‰“æ‹›å‘¼ï¼‰ã€‚
    
*   å¦‚æœä½ æ²¡æœ‰è‡ªå·±çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Â EvalScopeÂ é¢„ç½®çš„Â [evalscope/GeneralFunctionCall-Test](https://www.modelscope.cn/datasets/evalscope/GeneralFunctionCall-Test)Â æ•°æ®é›†ã€‚
    

### 2.Â è¿è¡Œè¯„æµ‹

æˆ‘ä»¬æå¤§åœ°ç®€åŒ–äº†ä»£ç å¤æ‚åº¦ã€‚å»ºè®®é€šè¿‡Â APIÂ æ¥å…¥æ¨¡å‹è¿›è¡Œè¯„æµ‹ï¼ˆæœ€æ¥è¿‘çœŸå®çº¿ä¸Šç¯å¢ƒï¼‰ã€‚

**åœºæ™¯Â Aï¼šä½¿ç”¨é¢„ç½®æ•°æ®é›†ï¼ˆæ¨èåˆæ¬¡ä½“éªŒï¼‰**

è¿™é‡Œä½¿ç”¨é¢„ç½®æ•°æ®é›†Â [evalscope/GeneralFunctionCall-Test](https://www.modelscope.cn/datasets/evalscope/GeneralFunctionCall-Test)Â ï¼Œæ ¹æ®Â MoonshotAIÂ [å¼€æºæ ·æœ¬](https://github.com/MoonshotAI/K2-Vendor-Verifier)æ•´ç†ï¼Œå…¶æ ¸å¿ƒçš„â€œæ˜¯å¦åº”è§¦å‘å·¥å…·â€æ ‡ç­¾ç”±Â K2-ThinkingÂ æ¨¡å‹ç”Ÿæˆã€‚è¿™ç¡®ä¿äº†è¯„æµ‹æ ‡å‡†çš„ä¸€è‡´æ€§ï¼Œæå¤§åœ°æ–¹ä¾¿äº†å¼€å‘è€…è¿›è¡Œå®éªŒå¤ç°å’Œè‡ªåŠ¨åŒ–å›å½’æµ‹è¯•ã€‚

```python
from evalscope import TaskConfig, run_task
import os

# é…ç½®è¯„æµ‹ä»»åŠ¡
task_cfg = TaskConfig(
    model='qwen-plus',  # è¢«æµ‹æ¨¡å‹åç§°
    api_url='https://dashscope.aliyuncs.com/compatible-mode/v1', # OpenAI å…¼å®¹æ ¼å¼çš„ API åœ°å€
    api_key=os.getenv('DASHSCOPE_API_KEY'), # ä»ç¯å¢ƒå˜é‡è·å– Key
    datasets=['general_fc'],  # æ ¸å¿ƒå‚æ•°ï¼šæŒ‡å®šä½¿ç”¨ 'å·¥å…·è°ƒç”¨(general_fc)' è¯„æµ‹æ¨¡å¼ï¼Œé»˜è®¤ä½¿ç”¨ evalscope/GeneralFunctionCall-Test
)

# å¯åŠ¨ä»»åŠ¡ï¼Œè‡ªåŠ¨æ‰“å°ç»“æœ
run_task(task_cfg=task_cfg)

```

**åœºæ™¯Â Bï¼šä½¿ç”¨è‡ªå®šä¹‰ä¸šåŠ¡æ•°æ®**

å¦‚æœä½ çš„ä¸šåŠ¡åœºæ™¯ç‰¹æ®Šï¼ˆä¾‹å¦‚é‡‘èã€åŒ»ç–—ï¼‰ï¼Œå»ºè®®å»ºç«‹è‡ªå·±çš„æµ‹è¯•é›†ã€‚

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºÂ `example.jsonl`Â çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆåŒ…å«æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬ï¼‰ï¼š

```json
{"messages":[{"role":"system","content":"ä½ æ˜¯åŠ©æ‰‹"},{"role":"user","content":"è¯·æŠŠ 2 å’Œ 3 ç›¸åŠ "}],"tools":[{"type":"function","function":{"name":"add","description":"å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ ","parameters":{"type":"object","properties":{"a":{"type":"number","description":"ç¬¬ä¸€ä¸ªæ•°å­—"},"b":{"type":"number","description":"ç¬¬äºŒä¸ªæ•°å­—"}},"required":["a","b"],"additionalProperties":false}}}],"should_call_tool":true}
{"messages":[{"role":"system","content":"ä½ æ˜¯åŠ©æ‰‹"},{"role":"user","content":"ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œæˆ‘ä»¬èŠèŠå¤©"}],"tools":[{"type":"function","function":{"name":"add","description":"å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ ","parameters":{"type":"object","properties":{"a":{"type":"number","description":"ç¬¬ä¸€ä¸ªæ•°å­—"},"b":{"type":"number","description":"ç¬¬äºŒä¸ªæ•°å­—"}},"required":["a","b"],"additionalProperties":false}}}],"should_call_tool":false}
{"messages":[{"role":"system","content":"ä½ æ˜¯åŠ©æ‰‹"},{"role":"user","content":"æŠŠ 37 æ‘„æ°åº¦è½¬æ¢ä¸ºåæ°åº¦"}],"tools":[{"type":"function","function":{"name":"convert_temperature","description":"å°†æ‘„æ°åº¦è½¬æ¢ä¸ºåæ°åº¦","parameters":{"type":"object","properties":{"celsius":{"type":"number","description":"æ‘„æ°æ¸©åº¦å€¼"}},"required":["celsius"],"additionalProperties":false}}}],"should_call_tool":true}
```

å°†ä¸Šè¿°æ–‡ä»¶ä¿å­˜åˆ°Â `custom_eval/text/fc/example.jsonl`ï¼Œç„¶åè¿è¡Œä»¥ä¸‹ä»£ç ï¼š

```python
from evalscope import TaskConfig, run_task
import os

task_cfg = TaskConfig(
    model='qwen-plus',
    api_url='https://dashscope.aliyuncs.com/compatible-mode/v1',
    api_key=os.getenv('DASHSCOPE_API_KEY'),
    datasets=['general_fc'], 
    # é€šè¿‡ dataset_args æ³¨å…¥æœ¬åœ°æ•°æ®è·¯å¾„
    dataset_args={
        'general_fc': {
            "local_path": "custom_eval/text/fc",  # ä½ çš„ JSONL æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹è·¯å¾„
            "subset_list": ["example"]            # å¯¹åº”æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰
        }
    },
)

run_task(task_cfg=task_cfg)

```

### 3.Â è§£è¯»æŠ¥å‘Š

è¯„æµ‹å®Œæˆåï¼Œæ§åˆ¶å°å°†è¾“å‡ºä¸€ä»½æŒ‡æ ‡æŠ¥å‘Šã€‚ä½ éœ€è¦é‡ç‚¹å…³æ³¨ä»¥ä¸‹å››ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼š

| æŒ‡æ ‡åç§° | å«ä¹‰ | è¯´æ˜ |
| --- | --- | --- |
| `tool_call_f1` | **å†³ç­–Â F1Â åˆ†æ•°** | è¡¡é‡æ¨¡å‹æ˜¯å¦â€œå¤´è„‘æ¸…é†’â€ã€‚åˆ†æ•°ä½è¯´æ˜æ¨¡å‹ç»å¸¸åœ¨ä¸éœ€è¦è°ƒå·¥å…·æ—¶ä¹±è°ƒï¼Œæˆ–è¯¥è°ƒçš„æ—¶å€™æ²¡ååº”ã€‚è¿™æ˜¯Â AgentÂ æ™ºèƒ½ç¨‹åº¦çš„ç¬¬ä¸€é“é—¨æ§›ã€‚ |
| `schema_accuracy` | **å‚æ•°æ ¼å¼å‡†ç¡®ç‡** | è¡¡é‡æ¨¡å‹ç”Ÿæˆçš„Â JSONÂ å‚æ•°æ˜¯å¦ç¬¦åˆÂ SchemaÂ å®šä¹‰ã€‚å¦‚æœæ­¤é¡¹ä½ï¼Œè¯´æ˜æ¨¡å‹ç»å¸¸äº§ç”Ÿâ€œå¹»è§‰å‚æ•°â€ï¼Œä¼šå¯¼è‡´ä»£ç è¿è¡Œå´©æºƒã€‚ |
| `count_finish_reason_tool_call` | è§¦å‘è°ƒç”¨æ¬¡æ•° | æ¨¡å‹é¢„æµ‹éœ€è¦è°ƒç”¨å·¥å…·çš„æ€»æ¬¡æ•°ã€‚ |
| `count_successful_tool_call` | å®Œç¾è°ƒç”¨æ¬¡æ•° | æ—¢**å†³ç­–æ­£ç¡®**ï¼Œä¸”**å‚æ•°ä¹Ÿå®Œå…¨æ­£ç¡®**çš„æ ·æœ¬æ•°ã€‚ |

**ç»“æœç¤ºä¾‹ï¼š**

```text
+-----------+------------+-------------------------------+----------+-------+---------+
| Model     | Dataset    | Metric                        | Subset   |   Num |   Score |
+===========+============+===============================+==========+=======+=========+
| modeltest | general_fc | count_finish_reason_tool_call | default  |    10 |  3      |
+-----------+------------+-------------------------------+----------+-------+---------+
| modeltest | general_fc | count_successful_tool_call    | default  |    10 |  2      |
+-----------+------------+-------------------------------+----------+-------+---------+
| modeltest | general_fc | schema_accuracy               | default  |    10 |  0.6667 |
+-----------+------------+-------------------------------+----------+-------+---------+
| modeltest | general_fc | tool_call_f1                  | default  |    10 |  0.5    |
+-----------+------------+-------------------------------+----------+-------+---------+

```

**ç®€è¦ç‚¹è¯„ï¼š** åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ä¸€å…±å‘é€äº†10æ¬¡è¯·æ±‚ï¼Œæ¨¡å‹è§¦å‘äº†Â 3Â æ¬¡å·¥å…·è°ƒç”¨ï¼ˆ`count_finish_reason_tool_call`ï¼‰ï¼Œä½†åªæœ‰Â 2Â æ¬¡æ˜¯å®Œå…¨æˆåŠŸçš„ï¼ˆ`count_successful_tool_call`ï¼‰ã€‚

*   **é—®é¢˜åˆ†æ**ï¼š`schema_accuracy`Â ä¸ºÂ 0.6667ï¼Œè¯´æ˜æœ‰ä¸€æ¬¡è°ƒç”¨è™½ç„¶è§¦å‘äº†ï¼Œä½†å‚æ•°æ ¼å¼æ˜¯é”™çš„ï¼ˆå¯èƒ½æ˜¯ç¼ºäº†å­—æ®µæˆ–ç±»å‹ä¸å¯¹ï¼‰ï¼›`tool_call_f1`Â ä»…ä¸ºÂ 0.5ï¼Œè¯´æ˜æ¨¡å‹åœ¨â€œè¯¥ä¸è¯¥è°ƒâ€è¿™ä¸ªå†³ç­–ä¸Šå­˜åœ¨ä¸¥é‡çš„è¯¯åˆ¤ï¼ˆæ¼è°ƒæˆ–è¯¯è°ƒï¼‰ã€‚
    
*   **æ”¹è¿›å»ºè®®**ï¼šè¯¥æ¨¡å‹å¯èƒ½éœ€è¦é€šè¿‡æ›´å¤šåŒ…å«å¤æ‚Â SchemaÂ çš„æ ·æœ¬è¿›è¡Œå¾®è°ƒï¼Œæˆ–è€…ä¼˜åŒ–Â PromptÂ ä¸­çš„Â SystemÂ æŒ‡ä»¤ä»¥æ˜ç¡®å·¥å…·è°ƒç”¨è¾¹ç•Œã€‚
    

**å¯è§†åŒ–ï¼š**

EvalScopeÂ å†…ç½®äº†å¯è§†åŒ–åˆ†æå·¥å…·ï¼Œè®©ä½ éå¸¸æ–¹ä¾¿æŸ¥çœ‹æ¯ä¸€ä¸ªæ ·æœ¬çš„è¯¦ç»†æƒ…å†µã€‚æ— éœ€ç¼–å†™é¢å¤–ä»£ç ï¼Œåªéœ€åœ¨ç»ˆç«¯è¿è¡Œä¸€æ¡å‘½ä»¤ï¼Œå³å¯å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼š

```shell
evalscope app
```

æ‰“å¼€æµè§ˆå™¨è®¿é—®Â `http://127.0.0.1:7860`å³å¯æŸ¥çœ‹æ¨¡å‹å¾—åˆ†åˆ†å¸ƒå’Œåœ¨æ¯ä¸ªé—®é¢˜çš„å›å¤å’Œæ‰“åˆ†ï¼š

![image.png](https://sail-moe.oss-cn-hangzhou.aliyuncs.com/yunlin/images/evalscope/doc/best_practice/general_fc_overview.png)

![image.png](https://sail-moe.oss-cn-hangzhou.aliyuncs.com/yunlin/images/evalscope/doc/best_practice/general_fc_detail.png)

## å››ã€Â æ€»ç»“

å·¥å…·è°ƒç”¨èƒ½åŠ›æ˜¯è¿æ¥Â LLMÂ ä¸çœŸå®ä¸–ç•Œçš„æ¡¥æ¢ã€‚é€šè¿‡å¼•å…¥Â **EvalScope**Â çš„å·¥å…·è°ƒç”¨å‡†ç¡®æ€§å’Œæœ‰æ•ˆæ€§çš„éªŒè¯æ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†ä¾èµ–ä¸»è§‚æ„Ÿè§‰æ¥è¯„ä»·æ¨¡å‹ï¼Œè€Œæ˜¯ç”¨æ•°æ®è¯´è¯ã€‚

è¿™å¥—æœ€ä½³å®è·µä¸ä»…èƒ½å¸®åŠ©ä½ ç­›é€‰å‡ºæœ€é€‚åˆä¸šåŠ¡çš„æ¨¡å‹ï¼Œè¿˜èƒ½ä½œä¸ºåç»­æ¨¡å‹å¾®è°ƒï¼ˆFine-tuningï¼‰æˆ–Â PromptÂ ä¼˜åŒ–çš„â€œæ ‡å°ºâ€ï¼Œç¡®ä¿ä½ çš„Â AgentÂ èƒ½åŠ›ç¨³æ­¥æå‡ã€‚

ç°åœ¨ï¼Œå°±ç”¨è¿™å¥—å·¥å…·ä¸ºä½ çš„æ¨¡å‹åšä¸€æ¬¡å…¨é¢çš„ä½“æ£€å§ï¼